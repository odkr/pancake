<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>pandoc-toolkit.lua</title><link rel="stylesheet" type="text/css" href="../styles/main.css" /><script type="text/javascript" src="../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="pandoc-toolkit.lua"></a><a name="Topic6"></a><div class="CTopic TFile LLua first">
 <div class="CTitle">pandoc-toolkit.lua</div>
 <div class="CBody"><p>Toolkit for writing Lua filters for <a href="https://pandoc.org/" target="_top">Pandoc</a>.</p></div>
</div>

<a name="Type-checking"></a><a name="Topic7"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Type-checking</div>
</div>

<a name="type_match"></a><a name="Topic2"></a><div class="CTopic TFunction LLua last">
 <div class="CTitle">type_match</div>
 <div id="NDPrototype2" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> type_match (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">val,</td></tr><tr><td class="PName first last">decl,</td></tr><tr><td class="PName first last">_seen</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Check whether a value is of a type.</p><div class="CHeading">Type Declaration Grammar</div><p>Declare one or more Lua type names separated by '|' to require that the given value is of one of the given types (e.g., 'string|table' requires the value to be a string or a table). '*' is short for the list of all types but `nil`. '?T' is short for 'T|nil' (e.g., '?table' is short for 'table|nil').</p><p>In <a href="https://en.wikipedia.org/wiki/EBNF" target="_top">Extended Backus-Naur Form</a>:</p><p>Type = 'boolean' | 'function' | 'nil'&nbsp; | 'number' | 'string'&nbsp; | 'table'&nbsp; | 'thread' | 'userdata'</p><p>Type list = [ '?' ], type, { '|', type }</p><p>Wildcard = [ '?' ], '*'</p><p>Type declaration = type list | wildcard</p><div class="CHeading">Complex Types</div><p>You can check types of table or userdata fields by declarding a table that maps indices to declarations.</p><p>---</p><pre class="CText">type_check({1, '2'}, {'number', 'number'})</pre><p>nil&nbsp; index 2: expected number, got string.</p><pre class="CText">type_check({foo = 'bar'}, {foo = '?table'})</pre><p>nil&nbsp; index foo: expected table or nil, got string.</p><pre class="CText">type_check('foo', {foo = '?table'})</pre><p>nil&nbsp; expected table or userdata, got string.&nbsp; ---</p><div class="CHeading">Caveats</div><p>Wrong type names (e.g., 'int') do <b>not</b> throw an error.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">val</td><td class="CDLDefinition"><p>A Value</p></td></tr><tr><td class="CDLEntry">decl</td><td class="CDLDefinition"><p>A type declaration</p></td></tr></table><div class="CHeading">Returns</div><table class="CDefinitionList"><tr><td class="CDLEntry">`true`</td><td class="CDLDefinition"><p>if the value matches the declaration.&nbsp; `nil` and an error message otherwise.</p></td></tr></table></div>
</div>

</body></html>